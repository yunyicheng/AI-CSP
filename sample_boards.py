from puzzle_csp import *
from propagators import *

boards = [ [[3],[11, 2],[11,21,3,0],[12,22,2,1],[13,23,33,6,3],[31,32,5,0]],
[[4],[11,21,6,3],[12,13,3,0],[14,24,3,1],[22,23,7,0],[31,32,2,2],[33,43,3,1],[34,44,6,3],[41,42,7,0]],
[[5],[11,21,4,1],[12,13,2,2],[14,24,1,1],[15,25,1,1],[22,23,9,0],[31,32,3,1],[33,34,44,6,3],[35,45,9,0],[41,51,7,0],[42,43,3,1],[52,53,6,3],[54,55,4,1]],
[[6],[11,21,11,0],[12,13,2,2],[14,24,20,3],[15,16,26,36,6,3],[22,23,3,1],[25,35,3,2],[31,32,41,42,240,3],[33,34,6,3],[43,53,6,3],[44,54,55,7,0],[45,46,30,3],[51,52,6,3],[56,66,9,0],[61,62,63,8,0],[64,65,2,2]],
[[8], [11, 12, 2, 2], [13, 14, 23, 24, 14, 0], [15, 25, 26, -6, 1], [16, 17, 18, 27, 28, 37, 38, 47, 0], [21, 22, 31, 41, 51, -9, 1], [32, 42, 52, 13, 0], [42, 3], [33, 34, 43, 1, 2], [35, 36, 45, 46, 47, 48, 94080, 3],
 [44, 53, 54, 55, -1, 1], [56, 57, 58, 68, 72, 3], [61, 62, 63, 19, 0], [64, 65, 75, 84, 85, 21, 0], [75, 3], [66, 67, 76, 77, 86, 48, 3], [71, 81, 82, 83, -12, 1], [72, 73, 74, 240, 3], [78, 87, 88, 1, 2]]]

def print_funpuzz_soln(var_array):
    for row in var_array:
        print([var.get_assigned_value() for var in row])

if __name__ == "__main__":
    for i in range(len(boards)):
        print("Solving board")
        csp, var_array = caged_csp_model(boards[i])
        solver = BT(csp)
        print("=======================================================")
        if i <= 2:
            print("GAC")
            solver.bt_search(prop_GAC)
            print("FC")
            solver.bt_search(prop_FC)
            print("BT")
            solver.bt_search(prop_BT)
            print("Solution")
        else:
            print("GAC")
            solver.bt_search(prop_GAC)
            print("FC")
            solver.bt_search(prop_FC)
        print_funpuzz_soln(var_array)
